{% extends "base.html" %}
{% block title %}ν”„λ΅ν•„{% endblock %}
{% block content %}
<h2>ν”„λ΅ν•„ κ΄€λ¦¬</h2>

<p>μ‚¬μ©μλ…: {{ user.username }}</p>
<p>λ³΄μ  ν¬μΈνΈ: {{ user.balance }}P</p>

<!-- π”µ μ†κ°κΈ€ μμ • -->
<form method="post" action="{{ url_for('profile') }}">
  {{ bio_form.hidden_tag() }}
  <input type="hidden" name="action" value="update_bio">

  <h3>μ†κ°κΈ€ μμ •</h3>
  {{ bio_form.bio(rows=4, cols=50) }}<br>
  <button type="submit">μ†κ°κΈ€ μ—…λ°μ΄νΈ</button>
</form>


<hr>
<!-- π  λΉ„λ°€λ²νΈ λ³€κ²½ -->
<form method="post" action="{{ url_for('profile') }}">
  {{ pw_form.hidden_tag() }}
  <input type="hidden" name="action" value="update_password">

  <h3>λΉ„λ°€λ²νΈ λ³€κ²½</h3>
  {{ pw_form.current_password.label }}<br>
  {{ pw_form.current_password(size=30) }}<br>
  {{ pw_form.new_password.label }}<br>
  {{ pw_form.new_password(size=30) }}<br>
  {{ pw_form.confirm_password.label }}<br>
  {{ pw_form.confirm_password(size=30) }}<br>

  <button type="submit">λΉ„λ°€λ²νΈ λ³€κ²½</button>
</form>
<hr>
<h3>ν¬μΈνΈ μ‚¬μ© λ‚΄μ—­</h3>

{% if history %}
  <ul>
    {% for h in history %}
      <li>
        {{ h.timestamp }} -
        {% if h.sender_id == user.id %}
          <span style="color: red;">λ³΄λƒ„ β {{ h.receiver_name }}</span> ({{ h.amount }}P)
        {% else %}
          <span style="color: green;">λ°›μ β† {{ h.sender_name }}</span> (+{{ h.amount }}P)
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>ν¬μΈνΈ μ‚¬μ© λ‚΄μ—­μ΄ μ—†μµλ‹λ‹¤.</p>
{% endif %}
{% endblock %}
